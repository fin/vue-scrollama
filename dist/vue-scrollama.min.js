!function(){"use strict";function N(e){for(var t=e.length,n=[],i=0;i<t;i+=1)n.push(e[i]);return n}function s(e){return"scrollama__debug-offset--"+e.id}function j(e){!function(e){var t=e.id,n=e.offsetVal,i=e.stepClass,o=document.createElement("div");o.setAttribute("id",s({id:t})),o.setAttribute("class","scrollama__debug-offset"),o.style.position="fixed",o.style.left="0",o.style.width="100%",o.style.height="0px",o.style.borderTop="2px dashed black",o.style.zIndex="9999";var r=document.createElement("p");r.innerText='".'+i+'" trigger: '+n,r.style.fontSize="12px",r.style.fontFamily="monospace",r.style.color="black",r.style.margin="0",r.style.padding="6px",o.appendChild(r),document.body.appendChild(o)}({id:e.id,offsetVal:e.offsetVal,stepClass:e.stepEl[0].getAttribute("class")})}function V(e){var t=e.id,n=(e.stepOffsetHeight,e.offsetMargin);e.offsetVal;!function(e){var t=e.id,n=e.offsetMargin,i=(e.offsetVal,s({id:t}));document.querySelector("#"+i).style.top=n+"px"}({id:t,offsetMargin:n})}function W(e){var t=e.id,n=e.index,i=e.state,o=function(e){return"scrollama__debug-step--"+e.id+"-"+e.i}({id:t,i:n}),r=document.querySelector("#"+o+"_above"),s=document.querySelector("#"+o+"_below"),a="enter"===i?"block":"none";r&&(r.style.display=a),s&&(s.style.display=a)}function e(){var t=["stepAbove","stepBelow","stepProgress","viewportAbove","viewportBelow"],r={stepEnter:function(){},stepExit:function(){},stepProgress:function(){}},n={},l=null,f=[],s=[],a=[],d=[],c=0,u=0,p=0,h=0,e=0,g=0,v=!1,i=!1,m=!1,b=!1,_=!1,y=!1,w="down",x=[];function o(e){return e.getBoundingClientRect().top+window.pageYOffset-(document.body.clientTop||0)}function E(e){return+e.getAttribute("data-scrollama-index")}function O(){window.pageYOffset>e?w="down":window.pageYOffset<e&&(w="up"),e=window.pageYOffset}function T(e){n[e]&&n[e].forEach(function(e){return e.disconnect()})}function k(){p=window.innerHeight,h=function(){var e=document.body,t=document.documentElement;return Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)}(),u=c*p,v&&(s=f.map(function(e){return e.getBoundingClientRect().height}),a=f.map(o),i&&F()),m&&V({id:l,stepOffsetHeight:s,offsetMargin:u,offsetVal:c})}function R(e){if(e&&!i){if(!v)return console.error("scrollama error: enable() called before scroller was ready"),void(i=!1);F()}!e&&i&&t.forEach(T),i=e}function C(e,t){var n=E(e);void 0!==t&&(d[n].progress=t);var i={element:e,index:n,progress:d[n].progress};"enter"===d[n].state&&r.stepProgress(i)}function S(e,t){if("above"===t)for(var n=0;n<e;n++){var i=d[n];"enter"!==i.state&&"down"!==i.direction?(M(f[n],"down",!1),$(f[n],"down")):"enter"===i.state&&$(f[n],"down")}else if("below"===t)for(var o=d.length-1;e<o;o--){var r=d[o];"enter"===r.state&&$(f[o],"up"),"down"===r.direction&&(M(f[o],"up",!1),$(f[o],"up"))}}function M(e,t,n){void 0===n&&(n=!0);var i=E(e),o={element:e,index:i,direction:t};d[i].direction=t,d[i].state="enter",_&&n&&"down"===t&&S(i,"above"),_&&n&&"up"===t&&S(i,"below"),r.stepEnter&&!x[i]&&(r.stepEnter(o,d),m&&W({id:l,index:i,state:"enter"}),y&&(x[i]=!0)),b&&C(e)}function $(e,t){var n=E(e),i={element:e,index:n,direction:t};b&&("down"===t&&d[n].progress<1?C(e,1):"up"===t&&0<d[n].progress&&C(e,0)),d[n].direction=t,d[n].state="exit",r.stepExit(i,d),m&&W({id:l,index:n,state:"exit"})}function H(e){var t=e[0];O();var n=t.isIntersecting,i=t.boundingClientRect,o=t.target,r=i.top,s=i.bottom,a=r-u,l=s-u,f=E(o),c=d[f];n&&a<=0&&0<=l&&"down"===w&&"enter"!==c.state&&M(o,w),!n&&0<a&&"up"===w&&"enter"===c.state&&$(o,w)}function z(e){var t=e[0];O();var n=t.isIntersecting,i=t.boundingClientRect,o=t.target,r=i.top,s=i.bottom,a=r-u,l=s-u,f=E(o),c=d[f];n&&a<=0&&0<=l&&"up"===w&&"enter"!==c.state&&M(o,w),!n&&l<0&&"down"===w&&"enter"===c.state&&$(o,w)}function A(e){var t=e[0];O();var n=t.isIntersecting,i=t.target,o=E(i),r=d[o];n&&"down"===w&&"down"!==r.direction&&"enter"!==r.state&&(M(i,"down"),$(i,"down"))}function L(e){var t=e[0];O();var n=t.isIntersecting,i=t.target,o=E(i),r=d[o];n&&"up"===w&&"down"===r.direction&&"enter"!==r.state&&(M(i,"up"),$(i,"up"))}function P(e){var t=e[0];O();var n=t.isIntersecting,i=t.intersectionRatio,o=t.boundingClientRect,r=t.target,s=o.bottom;n&&0<=s-u&&C(r,+i.toFixed(3))}function I(){n.stepProgress=f.map(function(e,t){var n=s[t]-u+"px 0px "+(-p+u)+"px 0px",i=function(e){for(var t=Math.ceil(e/g),n=[],i=1/t,o=0;o<t;o++)n.push(o*i);return n}(s[t]),o=new IntersectionObserver(P,{rootMargin:n,threshold:i});return o.observe(e),o})}function F(){t.forEach(T),n.viewportAbove=f.map(function(e,t){var n=h-a[t],i=u-p-s[t],o=new IntersectionObserver(A,{rootMargin:n+"px 0px "+i+"px 0px"});return o.observe(e),o}),n.viewportBelow=f.map(function(e,t){var n=-u-s[t],i=u-p+s[t]+h,o=new IntersectionObserver(L,{rootMargin:n+"px 0px "+i+"px 0px"});return o.observe(e),o}),n.stepAbove=f.map(function(e,t){var n=-u+s[t],i=new IntersectionObserver(H,{rootMargin:n+"px 0px "+(u-p)+"px 0px"});return i.observe(e),i}),n.stepBelow=f.map(function(e,t){var n=-u,i=u-p+s[t],o=new IntersectionObserver(z,{rootMargin:n+"px 0px "+i+"px 0px"});return o.observe(e),o}),b&&I()}var B={};return B.setup=function(e){var t=e.step,n=e.offset;void 0===n&&(n=.5);var i=e.progress;void 0===i&&(i=!1);var o=e.threshold;void 0===o&&(o=4);var r=e.debug;void 0===r&&(r=!1);var s=e.order;void 0===s&&(s=!0);var a=e.once;return void 0===a&&(a=!1),l=function(){var t="abcdefghijklmnopqrstuv",n=t.length,e=Date.now();return""+[0,0,0].map(function(e){return t[Math.floor(Math.random()*n)]}).join("")+e}(),(f=function(e,t){return void 0===t&&(t=document),"string"==typeof e?N(t.querySelectorAll(e)):e instanceof Element?N([e]):e instanceof NodeList?N(e):e instanceof Array?e:[]}(t)).length?(m=r,b=i,_=s,y=a,B.offsetTrigger(n),g=Math.max(1,+o),v=!0,m&&j({id:l,stepEl:f,offsetVal:c}),f.forEach(function(e,t){return e.setAttribute("data-scrollama-index",t)}),d=f.map(function(){return{direction:null,state:null,progress:0}}),k(),B.enable()):console.error("scrollama error: no step elements"),B},B.resize=function(){return k(),B},B.enable=function(){return R(!0),B},B.disable=function(){return R(!1),B},B.destroy=function(){R(!1),Object.keys(r).forEach(function(e){return r[e]=null}),Object.keys(n).forEach(function(e){return n[e]=null})},B.offsetTrigger=function(e){return e&&!isNaN(e)?(1<e&&console.error("scrollama error: offset value is greater than 1. Fallbacks to 1."),e<0&&console.error("scrollama error: offset value is lower than 0. Fallbacks to 0."),c=Math.min(Math.max(0,e),1),B):(isNaN(e)&&console.error("scrollama error: offset value is not a number. Fallbacks to 0."),c)},B.onStepEnter=function(e){return"function"==typeof e?r.stepEnter=e:console.error("scrollama error: onStepEnter requires a function"),B},B.onStepExit=function(e){return"function"==typeof e?r.stepExit=e:console.error("scrollama error: onStepExit requires a function"),B},B.onStepProgress=function(e){return"function"==typeof e?r.stepProgress=e:console.error("scrollama error: onStepProgress requires a function"),B},B}var n=void 0;function i(){i.init||(i.init=!0,n=-1!==function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(0<t)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(0<e.indexOf("Trident/")){var n=e.indexOf("rv:");return parseInt(e.substring(n+3,e.indexOf(".",n)),10)}var i=e.indexOf("Edge/");return 0<i?parseInt(e.substring(i+5,e.indexOf(".",i)),10):-1}())}var t={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"resize-observer",attrs:{tabindex:"-1"}})},staticRenderFns:[],_scopeId:"data-v-b329ee4c",name:"resize-observer",methods:{compareAndNotify:function(){this._w===this.$el.offsetWidth&&this._h===this.$el.offsetHeight||(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.$emit("notify"))},addResizeHandlers:function(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers:function(){this._resizeObject&&this._resizeObject.onload&&(!n&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),delete this._resizeObject.onload)}},mounted:function(){var e=this;i(),this.$nextTick(function(){e._w=e.$el.offsetWidth,e._h=e.$el.offsetHeight});var t=document.createElement("object");(this._resizeObject=t).setAttribute("aria-hidden","true"),t.setAttribute("tabindex",-1),t.onload=this.addResizeHandlers,t.type="text/html",n&&this.$el.appendChild(t),t.data="about:blank",n||this.$el.appendChild(t)},beforeDestroy:function(){this.removeResizeHandlers()}};var o={version:"0.4.5",install:function(e){e.component("resize-observer",t),e.component("ResizeObserver",t)}},r=null;"undefined"!=typeof window?r=window.Vue:"undefined"!=typeof global&&(r=global.Vue),r&&r.use(o);var a,l=(function(d){!function(u,p){var e=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var t,h=!1,n=void 0!==u;n&&u.getComputedStyle?(t=p.createElement("div"),["","-webkit-","-moz-","-ms-"].some(function(e){try{t.style.position=e+"sticky"}catch(e){}return""!=t.style.position})&&(h=!0)):h=!0;var r=!1,g="undefined"!=typeof ShadowRoot,s={top:null,left:null},a=[];function v(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}function m(e){return parseFloat(e)||0}function b(e){for(var t=0;e;)t+=e.offsetTop,e=e.offsetParent;return t}var o=(e(l,[{key:"refresh",value:function(){if(!h&&!this._removed){this._active&&this._deactivate();var e=this._node,t=getComputedStyle(e),n={position:t.position,top:t.top,display:t.display,marginTop:t.marginTop,marginBottom:t.marginBottom,marginLeft:t.marginLeft,marginRight:t.marginRight,cssFloat:t.cssFloat};if(!isNaN(parseFloat(n.top))&&"table-cell"!=n.display&&"none"!=n.display){this._active=!0;var i=e.style.position;"sticky"!=t.position&&"-webkit-sticky"!=t.position||(e.style.position="static");var o=e.parentNode,r=g&&o instanceof ShadowRoot?o.host:o,s=e.getBoundingClientRect(),a=r.getBoundingClientRect(),l=getComputedStyle(r);this._parent={node:r,styles:{position:r.style.position},offsetHeight:r.offsetHeight},this._offsetToWindow={left:s.left,right:p.documentElement.clientWidth-s.right},this._offsetToParent={top:s.top-a.top-m(l.borderTopWidth),left:s.left-a.left-m(l.borderLeftWidth),right:-s.right+a.right-m(l.borderRightWidth)},this._styles={position:i,top:e.style.top,bottom:e.style.bottom,left:e.style.left,right:e.style.right,width:e.style.width,marginTop:e.style.marginTop,marginLeft:e.style.marginLeft,marginRight:e.style.marginRight};var f=m(n.top);this._limits={start:s.top+u.pageYOffset-f,end:a.top+u.pageYOffset+r.offsetHeight-m(l.borderBottomWidth)-e.offsetHeight-f-m(n.marginBottom)};var c=l.position;"absolute"!=c&&"relative"!=c&&(r.style.position="relative"),this._recalcPosition();var d=this._clone={};d.node=p.createElement("div"),v(d.node.style,{width:s.right-s.left+"px",height:s.bottom-s.top+"px",marginTop:n.marginTop,marginBottom:n.marginBottom,marginLeft:n.marginLeft,marginRight:n.marginRight,cssFloat:n.cssFloat,padding:0,border:0,borderSpacing:0,fontSize:"1em",position:"static"}),o.insertBefore(d.node,e),d.docOffsetTop=b(d.node)}}}},{key:"_recalcPosition",value:function(){if(this._active&&!this._removed){var e=s.top<=this._limits.start?"start":s.top>=this._limits.end?"end":"middle";if(this._stickyMode!=e){switch(e){case"start":v(this._node.style,{position:"absolute",left:this._offsetToParent.left+"px",right:this._offsetToParent.right+"px",top:this._offsetToParent.top+"px",bottom:"auto",width:"auto",marginLeft:0,marginRight:0,marginTop:0});break;case"middle":v(this._node.style,{position:"fixed",left:this._offsetToWindow.left+"px",right:this._offsetToWindow.right+"px",top:this._styles.top,bottom:"auto",width:"auto",marginLeft:0,marginRight:0,marginTop:0});break;case"end":v(this._node.style,{position:"absolute",left:this._offsetToParent.left+"px",right:this._offsetToParent.right+"px",top:"auto",bottom:0,width:"auto",marginLeft:0,marginRight:0})}this._stickyMode=e}}}},{key:"_fastCheck",value:function(){this._active&&!this._removed&&(1<Math.abs(b(this._clone.node)-this._clone.docOffsetTop)||1<Math.abs(this._parent.node.offsetHeight-this._parent.offsetHeight))&&this.refresh()}},{key:"_deactivate",value:function(){var t=this;this._active&&!this._removed&&(this._clone.node.parentNode.removeChild(this._clone.node),delete this._clone,v(this._node.style,this._styles),delete this._styles,a.some(function(e){return e!==t&&e._parent&&e._parent.node===t._parent.node})||v(this._parent.node.style,this._parent.styles),delete this._parent,this._stickyMode=null,this._active=!1,delete this._offsetToWindow,delete this._offsetToParent,delete this._limits)}},{key:"remove",value:function(){var n=this;this._deactivate(),a.some(function(e,t){if(e._node===n._node)return a.splice(t,1),!0}),this._removed=!0}}]),l);function l(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),!(t instanceof HTMLElement))throw new Error("First argument must be HTMLElement");if(a.some(function(e){return e._node===t}))throw new Error("Stickyfill is already applied to this node");this._node=t,this._stickyMode=null,this._active=!1,a.push(this),this.refresh()}var f={stickies:a,Sticky:o,forceSticky:function(){h=!1,c(),this.refreshAll()},addOne:function(e){if(!(e instanceof HTMLElement)){if(!e.length||!e[0])return;e=e[0]}for(var t=0;t<a.length;t++)if(a[t]._node===e)return a[t];return new o(e)},add:function(n){if(n instanceof HTMLElement&&(n=[n]),n.length){for(var i=[],e=function(e){var t=n[e];return t instanceof HTMLElement?a.some(function(e){if(e._node===t)return i.push(e),!0})?"continue":void i.push(new o(t)):(i.push(void 0),"continue")},t=0;t<n.length;t++)e(t);return i}},refreshAll:function(){a.forEach(function(e){return e.refresh()})},removeOne:function(t){if(!(t instanceof HTMLElement)){if(!t.length||!t[0])return;t=t[0]}a.some(function(e){if(e._node===t)return e.remove(),!0})},remove:function(n){if(n instanceof HTMLElement&&(n=[n]),n.length)for(var e=function(e){var t=n[e];a.some(function(e){if(e._node===t)return e.remove(),!0})},t=0;t<n.length;t++)e(t)},removeAll:function(){for(;a.length;)a[0].remove()}};function c(){if(!r){r=!0,i(),u.addEventListener("scroll",i),u.addEventListener("resize",f.refreshAll),u.addEventListener("orientationchange",f.refreshAll);var e=void 0,t=void 0,n=void 0;"hidden"in p?(t="hidden",n="visibilitychange"):"webkitHidden"in p&&(t="webkitHidden",n="webkitvisibilitychange"),n?(p[t]||o(),p.addEventListener(n,function(){p[t]?clearInterval(e):o()})):o()}function i(){u.pageXOffset!=s.left?(s.top=u.pageYOffset,s.left=u.pageXOffset,f.refreshAll()):u.pageYOffset!=s.top&&(s.top=u.pageYOffset,s.left=u.pageXOffset,a.forEach(function(e){return e._recalcPosition()}))}function o(){e=setInterval(function(){a.forEach(function(e){return e._fastCheck()})},500)}}h||c(),d.exports?d.exports=f:n&&(u.Stickyfill=f)}(window,document)}(a={exports:{}},a.exports),a.exports);var f=function(e,t,n,i,o,r,s,a,l,f){"boolean"!=typeof s&&(l=a,a=s,s=!1);var c,d="function"==typeof n?n.options:n;if(e&&e.render&&(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0,o&&(d.functional=!0)),i&&(d._scopeId=i),r?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(r)},d._ssrRegister=c):t&&(c=s?function(){t.call(this,f(this.$root.$options.shadowRoot))}:function(e){t.call(this,a(e))}),c)if(d.functional){var u=d.render;d.render=function(e,t){return c.call(t),u(e,t)}}else{var p=d.beforeCreate;d.beforeCreate=p?[].concat(p,c):[c]}return n}({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"scrollama-container",class:{"with-graphic":e.$slots.graphic},attrs:{id:"scrollama-container-"+e.id}},[n("div",{ref:"scrollama-graphic",staticClass:"scrollama-graphic",attrs:{id:"scrollama-graphic-"+e.id}},[e._t("graphic")],2),e._v(" "),n("div",{staticClass:"scrollama-steps",attrs:{id:"scrollama-steps-"+e.id}},[e._t("default")],2),e._v(" "),n("resize-observer",{on:{notify:e.handleResize}})],1)},staticRenderFns:[]},void 0,{name:"Scrollama",components:{ResizeObserver:t},props:{id:{type:String,validator:function(e){return!/\s/.test(e)},default:function(){return Math.random().toString(36).substr(2,9)}}},mounted:function(){l.add(this.$refs["scrollama-graphic"]),this.scroller=e(),this.setup()},beforeDestroy:function(){this.scroller.destroy()},computed:{opts:function(){return Object.assign({},this.$attrs,{step:"#scrollama-steps-"+this.id+">div",container:"#scrollama-container-"+this.id,graphic:"#scrollama-graphic-"+this.id})}},methods:{setup:function(){var t=this;this.scroller.destroy(),this.scroller.setup(this.opts),this.$listeners["step-progress"]&&this.scroller.onStepProgress(function(e){t.$emit("step-progress",e)}),this.$listeners["step-enter"]&&this.scroller.onStepEnter(function(e){t.$emit("step-enter",e)}),this.$listeners["step-exit"]&&this.scroller.onStepExit(function(e){t.$emit("step-exit",e)}),this.$listeners["container-enter"]&&this.scroller.onContainerEnter(function(e){t.$emit("container-enter",e)}),this.$listeners["container-exit"]&&this.scroller.onContainerExit(function(e){t.$emit("container-exit",e)}),this.scroller.resize()},handleResize:function(){this.scroller.resize()}}},void 0,!1,void 0,void 0,void 0);Vue.component("Scrollama",f)}();
